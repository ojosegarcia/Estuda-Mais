<div *ngIf="professor$ | async as professor" class="profile-container">

  <header class="profile-header">
    <div class="professor-avatar-large">
      <span class="avatar-initials">{{ getInitials(professor.nomeCompleto) }}</span>
    </div>
    <div class="profile-header-info">
      <h1>{{ professor.nomeCompleto }}</h1>
      <div class="profile-tags">
        <span *ngFor="let materia of professor.materias" class="materia-tag">
          {{ materia.nome }}
        </span>
      </div>
    </div>
    <div class="profile-header-actions">
      <span class="profile-preco">R$ {{ professor.valorHora }}/hora</span>
    </div>
  </header>

  <div class="profile-body">

    <div class="profile-main">
      <section>
        <h2>Sobre Mim</h2>
        <p>{{ professor.sobre }}</p>
      </section>

      <section>
        <h2>Experi√™ncia</h2>
        <ul class="experiencia-lista" *ngIf="professor.experiencias && professor.experiencias.length > 0">
          <li *ngFor="let exp of professor.experiencias">
            <strong>{{ exp.cargo }}</strong> em {{ exp.instituicao }} ({{ exp.periodo }})
            <p>{{ exp.descricao }}</p>
          </li>
        </ul>
        <p *ngIf="!professor.experiencias || professor.experiencias.length === 0">Nenhuma experi√™ncia cadastrada.</p>
      </section>
    </div>

    <aside class="profile-sidebar">
      <section>
        <h2>üìÖ Agendar Aula</h2>
        
        <div class="date-picker">
          <label for="data-aula">1Ô∏è‚É£ Escolha uma data:</label>
          <input 
            type="date" 
            id="data-aula" 
            class="info-value"
            (change)="onDataSelecionada($event)"
            [min]="today" >
          
          <div *ngIf="dataSelecionada" class="data-selecionada-info">
            <span class="info-icon">üìÜ</span>
            <span class="info-text">{{ formatarData(dataSelecionada) }} ({{ getDiaLabel(getDiaDaSemana(dataSelecionada)) }})</span>
          </div>
        </div>
        
        <div class="horarios-container" *ngIf="dataSelecionada">
          <label>2Ô∏è‚É£ Escolha um hor√°rio dispon√≠vel:</label>

          <div *ngIf="isLoadingSlots" class="loading-slots">
            <p>‚è≥ Buscando hor√°rios dispon√≠veis...</p>
          </div>

          <div *ngIf="!isLoadingSlots && slotsFiltrados.length > 0" class="horarios-grid">
            <button 
              *ngFor="let slot of slotsFiltrados"
              class="horario-slot"
              (click)="agendarSlot(slot)">
              {{ slot }}
            </button>
          </div>

          <div *ngIf="!isLoadingSlots && slotsFiltrados.length === 0" class="empty-slots">
            <p>‚ùå Nenhum hor√°rio dispon√≠vel para este dia.</p>
            <p style="margin-top: 0.5rem; font-size: 0.85rem;">Tente outra data ou entre em contato com o professor.</p>
          </div>
        </div>

        <div class="empty-disponibilidades" *ngIf="!dataSelecionada && !isLoadingSlots">
          <p>üëÜ Selecione uma data no calend√°rio acima para ver os hor√°rios dispon√≠veis.</p>
        </div>
      </section>
      
      <section>
        <h2>‚≠ê Avalia√ß√µes</h2>
        <p>(Em breve)</p>
      </section>
    </aside>
  </div>

</div>